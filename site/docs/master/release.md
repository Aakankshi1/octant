## Release Process

Drone Cloud is used along with goreleaser for releases. This document is used to track the manual processes that occur during a release process.

### Update version

The version is tracked by a Makefile though `make version`. Update this to the next version then commit the changes.

### Generate Changelogs

Each pull request should have a changelog entry in `/changelogs/unreleased`. Run `make changelogs` to condense each change into a single console output. Update for formatting and editing as needed.

Follow the console output and remove old changelog entries. Then create the new changlog file in the format `CHANGELOG-X.Y.md`.

Finally, add the new changelog file under `CHANGELOG.md`.

### Trigger a Release

Once the above steps are completed, a user with write access to the repository will need to tag a commit then push the tag.

```
$ VERSION=$(make version)
$ git tag -a $VERSION -m "$VERSION release"
$ git push origin $VERSION
```

The release pipeline will trigger. If there are no errors, goreleaser will draft a release.

### Publish Release

Navigate to the releases page on Github. There should be a release in draft.

Remove the autogenerated commit log and replace with the one generated by the Makefile.

After the release notes are updated, click `Publish release`.

